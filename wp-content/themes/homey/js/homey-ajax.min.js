jQuery(document).ready(function($){"use strict";if("undefined"!=typeof HOMEY_ajax_vars){var ajaxurl=HOMEY_ajax_vars.admin_url+"admin-ajax.php",login_redirect_type=HOMEY_ajax_vars.redirect_type,login_redirect=HOMEY_ajax_vars.login_redirect,is_singular_listing=HOMEY_ajax_vars.is_singular_listing,paypal_connecting=HOMEY_ajax_vars.paypal_connecting,login_sending=HOMEY_ajax_vars.login_loading,process_loader_spinner=HOMEY_ajax_vars.process_loader_spinner,currency_updating_msg=HOMEY_ajax_vars.currency_updating_msg,homey_date_format=HOMEY_ajax_vars.homey_date_format,userID=HOMEY_ajax_vars.user_id,homey_reCaptcha=HOMEY_ajax_vars.homey_reCaptcha,is_listing_detail=HOMEY_ajax_vars.is_listing_detail,booked_hours_array=HOMEY_ajax_vars.booked_hours_array,pending_hours_array=HOMEY_ajax_vars.pending_hours_array,booking_start_hour=HOMEY_ajax_vars.booking_start_hour,booking_end_hour=HOMEY_ajax_vars.booking_end_hour,homey_min_book_days=HOMEY_ajax_vars.homey_min_book_days;""!==booked_hours_array&&0!==booked_hours_array.length&&(booked_hours_array=JSON.parse(booked_hours_array)),""!==pending_hours_array&&0!==pending_hours_array.length&&(pending_hours_array=JSON.parse(pending_hours_array));var is_tansparent=HOMEY_ajax_vars.homey_tansparent,retina_logo=HOMEY_ajax_vars.retina_logo,retina_logo_splash=HOMEY_ajax_vars.retina_logo_splash,retina_logo_mobile=HOMEY_ajax_vars.retina_logo_mobile,retina_logo_mobile_splash=HOMEY_ajax_vars.retina_logo_mobile_splash,no_more_listings=HOMEY_ajax_vars.no_more_listings,allow_additional_guests=HOMEY_ajax_vars.allow_additional_guests,allowed_guests_num=HOMEY_ajax_vars.allowed_guests_num,num_additional_guests=HOMEY_ajax_vars.num_additional_guests,agree_term_text=HOMEY_ajax_vars.agree_term_text,choose_gateway_text=HOMEY_ajax_vars.choose_gateway_text,success_icon=HOMEY_ajax_vars.success_icon,calendar_link=HOMEY_ajax_vars.calendar_link,focusedInput_2=null,allowed_guests_plus_additional=parseInt(allowed_guests_num)+parseInt(num_additional_guests),compare_url=HOMEY_ajax_vars.compare_url,add_compare=HOMEY_ajax_vars.add_compare,remove_compare=HOMEY_ajax_vars.remove_compare,compare_limit=HOMEY_ajax_vars.compare_limit,homey_booking_type=HOMEY_ajax_vars.homey_booking_type,homey_is_rtl=HOMEY_ajax_vars.homey_is_rtl;homey_is_rtl="yes"==homey_is_rtl;var homey_is_mobile=!1;/Android|webOS|iPhone|iPad|iPod|tablet|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(homey_is_mobile=!0);var homey_window_width=$(window).width(),homey_timeStamp_2=function(e){var t=e.split("-"),a=t[1]+"/"+t[0]+"/"+t[2];return new Date(a).getTime()};2==window.devicePixelRatio&&(is_tansparent?(""!=retina_logo_splash&&$(".transparent-header .homey_logo img").attr("src",retina_logo_splash),""!=retina_logo_mobile_splash&&$(".mobile-logo img").attr("src",retina_logo_mobile_splash)):(""!=retina_logo&&$(".homey_logo img").attr("src",retina_logo),""!=retina_logo_mobile&&$(".mobile-logo img").attr("src",retina_logo_mobile)));var currencySwitcherList=$("#homey-currency-switcher-list");0<currencySwitcherList.length&&$("#homey-currency-switcher-list > li").on("click",function(e){e.stopPropagation(),currencySwitcherList.slideUp(200);var selectedCurrencyCode=$(this).data("currency-code");selectedCurrencyCode&&($(".homey-selected-currency span").html(selectedCurrencyCode),homey_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"homey_currency_converter",currency_to_converter:selectedCurrencyCode},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}}))}),$(".homey-currency-switcher").on("change",function(e){var selectedCurrencyCode=$(this).val();selectedCurrencyCode&&(homey_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"homey_currency_converter",currency_to_converter:selectedCurrencyCode},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}}))});var listings_module_section=$("#listings_module_section");0<listings_module_section.length&&$("body").on("click",".homey-loadmore a",function(e){e.preventDefault();var $this=$(this),$wrap=$this.closest("#listings_module_section").find("#module_listings"),limit=$this.data("limit"),paged=$this.data("paged"),style=$this.data("style"),type=$this.data("type"),roomtype=$this.data("roomtype"),country=$this.data("country"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),featured=$this.data("featured"),offset=$this.data("offset"),sortby=$this.data("sortby"),author=$this.data("author"),authorid=$this.data("authorid");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_loadmore_listings",limit:limit,paged:paged,style:style,type:type,roomtype:roomtype,country:country,state:state,city:city,area:area,featured:featured,sort_by:sortby,offset:offset,author:author,authorid:authorid},beforeSend:function(){$this.find("i").css("display","inline-block")},success:function(e){"no_result"!=e?($wrap.append(e),$this.data("paged",paged+1),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing),compare_for_ajax()):$this.closest("#listings_module_section").find(".homey-loadmore").text(no_more_listings)},complete:function(){$this.find("i").css("display","none")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing);var compare_for_ajax=function(){var e=homeyGetCookie("homey_compare_listings");add_to_compare(compare_url,add_compare,remove_compare,compare_limit,e,4),remove_from_compare(e,add_compare,remove_compare)};$("#homey_complete_order").on("click",function(e){var t,a,r;if(e.preventDefault(),t=$("input[name='homey_payment_type']:checked").val(),r=$("input[name='is_upgrade']").val(),a=$("#listing_id").val(),"paypal"==t)homey_processing_modal(paypal_connecting),homey_paypal_payment(a,r);else if("stripe"==t){$(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click")}});var homey_processing_modal=function(e){var t='<div class="modal fade" id="homey_modal" tabindex="-1" role="dialog" aria-labelledby="homeyModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body homey_messages_modal">'+e+"</div></div></div></div></div>";jQuery("body").append(t),jQuery("#homey_modal").modal()},homey_processing_modal_close=function(){jQuery("#homey_modal").modal("hide")},homey_paypal_payment=function(listing_id,is_upgrade){$.ajax({type:"post",url:ajaxurl,data:{action:"homey_listing_paypal_payment",listing_id:listing_id,is_upgrade:is_upgrade},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};0<$("#add_review").length&&$("#add_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_action").val(),review_content=$("#review_content").val(),review_reservation_id=$("#review_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_review",rating:rating,review_action:review_action,review_content:review_content,review_reservation_id:review_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),0<$("#add_guest_review").length&&$("#add_guest_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_guest_action").val(),review_content=$("#review_content").val(),review_guest_reservation_id=$("#review_guest_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_guest_review",rating:rating,review_action:review_action,review_content:review_content,review_guest_reservation_id:review_guest_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var listing_review_ajax=function(sortby,listing_id,paged){var review_container=$("#homey_reviews");$.ajax({type:"post",url:ajaxurl,data:{action:"homey_ajax_review",sortby:sortby,listing_id:listing_id,paged:paged},beforeSend:function(){},success:function(e){review_container.empty(),review_container.html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){}})};0<$("#sort_review").length&&$("#sort_review").on("change",function(){var e=$(this).val(),t=$("#review_listing_id").val(),a=$("#review_paged").val();listing_review_ajax(e,t,a)}),0<$("#review_next").length&&$("#review_next").on("click",function(e){e.preventDefault(),$("#review_prev").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#total_pages").val(),r=$("#review_listing_id").val(),s=$("#review_paged").val();s=Number(s)+1,$("#review_paged").val(s),s==a&&$(this).attr("disabled",!0),listing_review_ajax(t,r,s)}),0<$("#review_prev").length&&$("#review_prev").on("click",function(e){e.preventDefault(),$("#review_next").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#review_listing_id").val(),r=$("#review_paged").val();r=Number(r)-1,$("#review_paged").val(r),r<=1&&$(this).attr("disabled",!0),listing_review_ajax(t,a,r)});var homey_convert_date=function(e){if(""==e)return"";var t=homey_date_format.toUpperCase().replace("YY","YYYY");return moment(e,t).format("YYYY-MM-DD")},homey_calculate_booking_cost=function(check_in_date,check_out_date,guests,listing_id,security,extra_options){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),""!==check_in_date&&""!==check_out_date?$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_booking_cost",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost, .payment-list").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}}):$("#homey_booking_cost, .payment-list").empty()},homey_calculate_hourly_booking_cost=function(check_in_date,start_hour,end_hour,guests,listing_id,security,extra_options){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),""!==check_in_date&&""!==start_hour&&""!==end_hour?$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_hourly_booking_cost",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost, .payment-list").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}}):$("#homey_booking_cost, .payment-list").empty()},check_booking_availability_on_date_change=function(check_in_date,check_out_date,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),jQuery(".homey_extra_price input").each(function(){jQuery(this).prop("checked",!1)}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_date_change",check_in_date:check_in_date,check_out_date:check_out_date,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_for_reservation, #request_for_reservation_mobile").removeAttr("disabled"),$("#instance_reservation, #instance_reservation_mobile").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_for_reservation, #request_for_reservation_mobile").attr("disabled",!0),$("#instance_reservation, #instance_reservation_mobile").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})},check_booking_availability_on_hour_change=function(check_in_date,start_hour,end_hour,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),jQuery(".homey_extra_price input").each(function(){jQuery(this).prop("checked",!1)}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_hour_change",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_hourly_reservation, #request_hourly_reservation_mobile").removeAttr("disabled"),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_hourly_reservation, #request_hourly_reservation_mobile").attr("disabled",!0),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})};$("#single-listing-date-range input").on("focus",function(){$(".single-listing-booking-calendar-js").css("display","block"),$(".single-listing-booking-calendar-js").addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(".single-listing-booking-calendar-js").removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active")}),$(".single-guests-js input").on("focus",function(){$(this).prev("label").css("display","block"),$(this).addClass("on-focus"),$(".single-form-guests-js").css("display","block")});var numClicks=0,fromTimestamp_2,toTimestamp_2=0,homey_booking_dates=function(){$(".single-listing-booking-calendar-js ul li").on("click",function(){var e=$(this);if((e.hasClass("past-day")||e.hasClass("homey-not-available-for-booking"))&&!e.hasClass("reservation_start"))return!1;numClicks+=1;var t=e.data("formatted-date"),a=e.data("timestamp");if("depart"==focusedInput_2&&fromTimestamp_2<a&&($(".single-listing-calendar-wrap ul").find("li.to-day").removeClass("selected").siblings().removeClass("to-day in-between"),numClicks=2),1==numClicks)fromTimestamp_2=a,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$('input[name="arrive"]').val(t),$('input[name="depart"]').val(""),"per_day"==homey_booking_type&&homey_calculate_price_checkin();else if(2==numClicks){toTimestamp_2=a,e.addClass("to-day selected"),$(".single-listing-booking-calendar-js").removeClass("depart_active").addClass("arrive_active");var r=$('input[name="arrive"]').val();r=homey_timeStamp_2(r),homey_timeStamp_2(t)<=r?(fromTimestamp_2=a,toTimestamp_2=0,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$('input[name="arrive"]').val(t),numClicks=1):(setInBetween_2(fromTimestamp_2,toTimestamp_2),$('input[name="depart"]').val(t),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide(),"per_day"==homey_booking_type&&homey_calculate_price_checkout())}2==numClicks&&(numClicks=0)})};if("per_day"==homey_booking_type){homey_booking_dates(),$(".single-listing-calendar-wrap ul li").on("hover",function(){var e=$(this).data("timestamp");1==numClicks&&setInBetween_2(fromTimestamp_2,e)});var setInBetween_2=function(t,a){$(".single-listing-calendar-wrap ul li").removeClass("in-between").filter(function(){var e=$(this).data("timestamp");return t<e&&e<a}).addClass("in-between")},homey_calculate_price_checkin=function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),r=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,r,s)},homey_calculate_price_checkout=function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),r=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,r,s),check_booking_availability_on_date_change(e,t,r,s)};$(".apply_guests").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),r=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,r,s),check_booking_availability_on_date_change(e,t,r,s)}),$(".homey_extra_price input").on("click",function(){var r,s=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");r="",r=(r=(r=e)+"|"+t)+"|"+a,s.push(r)}});var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),o=$("#listing_id").val(),i=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,o,i,s)})}"per_hour"==homey_booking_type&&($(".hourly-js-desktop ul li").on("click",function(){var e=$(this),t=e.data("formatted-date");$('input[name="arrive"]').val(t),$(".single-listing-hourly-calendar-wrap ul li").removeClass("selected"),e.addClass("selected"),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide();var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var r=$('select[name="start_hour"]').val(),s=$('select[name="end_hour"]').val(),o=$('input[name="guests"]').val(),i=$("#listing_id").val(),n=$("#reservation-security").val();homey_calculate_hourly_booking_cost(a,r,s,o,i,n),""!==a&&""!==r&&""!==s&&check_booking_availability_on_hour_change(a,r,s,i,n)}),$("#start_hour").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),""!==e&&""!==t&&""!==a&&check_booking_availability_on_hour_change(e,t,a,s,o)}),$("#end_hour").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),check_booking_availability_on_hour_change(e,t,a,s,o)}),$(".hourly-js-mobile ul li").on("click",function(){var e=$(this),t=e.data("formatted-date");$('input[name="arrive"]').val(t),$(".single-listing-hourly-calendar-wrap ul li").removeClass("selected"),e.addClass("selected"),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide();var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var r=$("#start_hour_overlay").val(),s=$("#end_hour_overlay").val(),o=$('input[name="guests"]').val(),i=$("#listing_id").val(),n=$("#reservation-security").val();homey_calculate_hourly_booking_cost(a,r,s,o,i,n),""!==a&&""!==r&&""!==s&&check_booking_availability_on_hour_change(a,r,s,i,n)}),$("#start_hour_overlay").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),""!==e&&""!==t&&""!==a&&check_booking_availability_on_hour_change(e,t,a,s,o)}),$("#end_hour_overlay").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),check_booking_availability_on_hour_change(e,t,a,s,o)}),$(".apply_guests").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),check_booking_availability_on_hour_change(e,t,a,s,o)}),$("#apply_guests_hourly").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),r=$('input[name="guests"]').val(),s=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,r,s,o),check_booking_availability_on_hour_change(e,t,a,s,o)}),$(".homey_extra_price input").on("click",function(){var r,s=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");r="",r=(r=(r=e)+"|"+t)+"|"+a,s.push(r)}});var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),o=$('input[name="guests"]').val(),i=$("#listing_id").val(),n=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,o,i,n,s)}));var single_listing_guests=function(){$(".adult_plus").on("click",function(e){e.preventDefault();parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="adult_guest"]').val()),a=parseInt($('input[name="child_guest"]').val());t++,$(".homey_adult").text(t),$('input[name="adult_guest"]').val(t);var r=t+a;"yes"!=allow_additional_guests&&r==allowed_guests_num?($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)):"yes"==allow_additional_guests&&r==allowed_guests_plus_additional&&""!==num_additional_guests&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)),$('input[name="guests"]').val(r)}),$(".adult_minus").on("click",function(e){e.preventDefault();parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="adult_guest"]').val()),a=parseInt($('input[name="child_guest"]').val());if(0!=t){t--,$(".homey_adult").text(t),$('input[name="adult_guest"]').val(t);var r=t+a;$('input[name="guests"]').val(r),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}}),$(".child_plus").on("click",function(e){e.preventDefault();parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="child_guest"]').val()),a=parseInt($('input[name="adult_guest"]').val());t++,$(".homey_child").text(t),$('input[name="child_guest"]').val(t);var r=t+a;"yes"!=allow_additional_guests&&r==allowed_guests_num?($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)):"yes"==allow_additional_guests&&r==allowed_guests_plus_additional&&""!==num_additional_guests&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)),$('input[name="guests"]').val(r)}),$(".child_minus").on("click",function(e){e.preventDefault();parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="child_guest"]').val()),a=parseInt($('input[name="adult_guest"]').val());if(0!=t){t--,$(".homey_child").text(t),$('input[name="child_guest"]').val(t);var r=t+a;$('input[name="guests"]').val(r),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}})};single_listing_guests(),$("#request_for_reservation, #request_for_reservation_mobile").on("click",function(e){e.preventDefault();var $this=$(this),extra_options=[],temp_opt,check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var check_out_date=$('input[name="depart"]').val();check_out_date=homey_convert_date(check_out_date);var guest_message=$('textarea[name="guest_message"]').val(),guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),0===parseInt(userID,10)?$("#modal-login").modal("show"):$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_reservation",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,listing_id:listing_id,extra_options:extra_options,guest_message:guest_message,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#request_hourly_reservation, #request_hourly_reservation_mobile").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var guest_message=$('textarea[name="guest_message"]').val(),start_hour=$('select[name="start_hour"]').val(),end_hour=$('select[name="end_hour"]').val(),guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove();var extra_options=[],temp_opt;$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),0===parseInt(userID,10)?$("#modal-login").modal("show"):$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_hourly_reservation",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,guest_message:guest_message,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#reserve_period_host").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#period_start_date").val(),check_out_date=$("#period_end_date").val(),listing_id=$("#period_listing_id").val(),period_note=$("#period_note").val(),security=$("#period-security").val(),notify=$(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reserve_period_host",check_in_date:check_in_date,check_out_date:check_out_date,period_note:period_note,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?(notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=calendar_link):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var homey_hourly_availability_calendar=function(){var e=new Date,t=[],a=[];for(var r in booked_hours_array)if(booked_hours_array.hasOwnProperty(r)&&""!==r){var s=[];s.title=HOMEY_ajax_vars.hc_reserved_label,s.start=moment.unix(r).utc().format(),s.end=moment.unix(booked_hours_array[r]).utc().format(),s.editable=!1,s.color="#fdd2d2",s.textColor="#444444",t.push(s)}for(var o in pending_hours_array)if(pending_hours_array.hasOwnProperty(o)&&""!==o){var i=[];i.title=HOMEY_ajax_vars.hc_pending_label,i.start=moment.unix(o).utc().format(),i.end=moment.unix(pending_hours_array[o]).utc().format(),i.editable=!1,i.color="#ffeedb",i.textColor="#333333",a.push(i)}var n=$.merge(t,a),l=document.getElementById("homey_hourly_calendar");new FullCalendar.Calendar(l,{locale:HOMEY_ajax_vars.homey_current_lang,timeZone:HOMEY_ajax_vars.homey_timezone,plugins:["timeGrid"],defaultView:"timeGridWeek",slotDuration:"00:30:00",minTime:booking_start_hour,maxTime:booking_end_hour,events:n,defaultDate:e,selectHelper:!0,selectOverlap:!1,footer:!1,nowIndicator:!0,allDayText:HOMEY_ajax_vars.hc_hours_label,weekNumbers:!1,weekNumbersWithinDays:!0,weekNumberCalculation:"ISO",editable:!1,eventLimit:!0,unselectAuto:!1,isRTL:homey_is_rtl,buttonText:{today:HOMEY_ajax_vars.hc_today_label}}).render()};"per_hour"==homey_booking_type&&"yes"==is_listing_detail&&0<$("#homey_hourly_calendar").length&&homey_hourly_availability_calendar(),$("#instance_reservation, #instance_reservation_mobile").on("click",function(e){e.preventDefault();var extra_options=[],temp_opt,$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var check_out_date=$('input[name="depart"]').val();check_out_date=homey_convert_date(check_out_date);var guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"homey_instance_booking",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").on("click",function(e){e.preventDefault();var $this=$(this),start_hour,end_hour,check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date),start_hour=$('select[name="start_hour"]').val(),end_hour=$('select[name="end_hour"]').val();var guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),(homey_is_mobile||homey_window_width<991)&&(start_hour=$("#start_hour_overlay").val(),end_hour=$("#end_hour_overlay").val());var extra_options=[],temp_opt;$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"homey_instance_hourly_booking",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .start_hour, .end_hour").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-offsite-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_offsite_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#guest_paid_button").on("click",function(e){e.preventDefault();var $this=$(this),parentDIV=$this.parents(".user-dashboard-right"),reservation_id=$("#reservation_id").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_guest_made_payment",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason22").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_decline_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_decline_hourly_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#cancelled").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_cancelled_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#cancelled_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_cancelled_hourly_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var homey_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_hourly_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_hourly_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),a=$("#reservation_id").val(),r=$("#checkout-security").val(),s=$("input[name='payment_gateway']:checked").val();if(null==s&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===s)homey_booking_paypal_payment(t,a,r);else if("stripe"===s){$(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html("")}}),$("#make_hourly_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),a=$("#reservation_id").val(),r=$("#checkout-security").val(),s=$("input[name='payment_gateway']:checked").val();if(null==s&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===s)homey_hourly_booking_paypal_payment(t,a,r);else if("stripe"===s){$(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html("")}});var homey_instance_booking_paypal_payment=function($this,check_in,check_out,guests,extra_options,listing_id,renter_message,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_booking_paypal_payment",check_in:check_in,check_out:check_out,guests:guests,extra_options:extra_options,listing_id:listing_id,renter_message:renter_message,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_hourly_instance_booking_paypal_payment=function($this,check_in,check_in_hour,check_out_hour,start_hour,end_hour,guests,extra_options,listing_id,renter_message,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_hourly_instance_booking_paypal_payment",check_in:check_in,check_in_hour:check_in_hour,check_out_hour:check_out_hour,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,renter_message:renter_message,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_instance_booking_payment").on("click",function(e){e.preventDefault();var r,t=$(this),a=$("#check_in_date").val(),s=$("#check_out_date").val(),o=$("#guests").val(),i=$("#listing_id").val(),n=$("#renter_message").val(),l=$("#checkout-security").val(),c=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");r="",r=(r=(r=e)+"|"+t)+"|"+a,c.push(r)}),$("#instance_noti").empty();var _=$("input[name='payment_gateway']:checked").val();if(null==_&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===_)homey_instance_booking_paypal_payment(t,a,s,o,c,i,n,l);else if("stripe"===_){$(this).parents("form").find(".homey_stripe_simple button").trigger("click")}}),$("#make_hourly_instance_booking_payment").on("click",function(e){e.preventDefault();var r,t=$(this),a=$("#check_in_date").val(),s=$("#check_in_hour").val(),o=$("#check_out_hour").val(),i=$("#start_hour").val(),n=$("#end_hour").val(),l=$("#guests").val(),c=$("#listing_id").val(),_=$("#renter_message").val(),d=$("#checkout-security").val(),u=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");r="",r=(r=(r=e)+"|"+t)+"|"+a,u.push(r)}),$("#instance_noti").empty();var h=$("input[name='payment_gateway']:checked").val();if(null==h&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===h)homey_hourly_instance_booking_paypal_payment(t,a,s,o,i,n,l,u,c,_,d);else if("stripe"===h){$(this).parents("form").find(".homey_stripe_simple button").trigger("click")}}),$("button.homey-booking-step-1").on("click",function(e){e.preventDefault();var $this=$(this),first_name=$("#first-name").val(),last_name=$("#last-name").val(),phone=$("#phone").val(),renter_message=$("#renter_message").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_step_1",first_name:first_name,last_name:last_name,phone:phone},beforeSend:function(){$this.children("i").remove(),$(".homey-booking-block-body-1 .continue-block-button p.error").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".homey-booking-block-title-2").removeClass("inactive mb-0"),$(".homey-booking-block-body-2").slideDown("slow"),$(".homey-booking-block-title-1").addClass("mb-0"),$(".homey-booking-block-body-1").slideUp("slow"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").show(),$("#guest_message").val(renter_message)):$(".homey-booking-block-body-1 .continue-block-button").prepend('<p class="error text-danger"><i class="fa fa-close"></i> '+e.message+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("button.homey-booking-step-2").on("click",function(e){e.preventDefault();var t=$("input[name='agreement']:checked").val();$(".homey-booking-block-body-2 .continue-block-button p.error").remove(),null!=t?($(".homey-booking-block-title-3").removeClass("inactive mb-0"),$(".homey-booking-block-body-3").slideDown("slow"),$(".homey-booking-block-title-2").addClass("mb-0"),$(".homey-booking-block-body-2").slideUp("slow"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").show()):$(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="fa fa-close"></i> '+agree_term_text+"</p>")}),$(".homey-booking-block-title-1 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-2, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-2, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-1").removeClass("mb-0"),$(".homey-booking-block-body-1").slideDown("slow")}),$(".homey-booking-block-title-2 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-1, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-1, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-2").removeClass("mb-0"),$(".homey-booking-block-body-2").slideDown("slow")}),$(".contact_listing_host").on("click",function(e){e.preventDefault();var $this=$(this),$host_contact_wrap=$this.parents(".host-contact-wrap"),$form=$this.parents("form"),$messages=$host_contact_wrap.find(".homey_contact_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($messages.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):($messages.empty().append(e.msg),$this.children("i").removeClass(process_loader_spinner)),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$("#host_detail_contact").on("click",function(e){e.preventDefault();var current_element=$(this),$this=$(this),$form=$this.parents("form");jQuery.ajax({type:"post",url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){current_element.children("i").remove(),current_element.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){current_element.children("i").removeClass(process_loader_spinner),e.success?($("#form_messages").empty().append(e.msg),current_element.children("i").addClass(success_icon)):$("#form_messages").empty().append(e.msg),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),0<$("#homey-print").length&&$("#homey-print").on("click",function(e){var listingID,printWindow;e.preventDefault(),listingID=$(this).attr("data-listing-id"),printWindow=window.open("","Print Me","width=850 ,height=842"),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_create_print",listing_id:listingID},success:function(e){printWindow.document.write(e),printWindow.document.close(),printWindow.focus()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".homey_login_button").on("click",function(e){e.preventDefault();var t=$(this);homey_login(t)}),$(".homey-register-button").on("click",function(e){e.preventDefault();var t=$(this);homey_register(t)});var homey_login=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?($messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),"same_page"==login_redirect_type?window.location.reload():window.location.href=login_redirect):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_register=function(currnt){var $form=currnt.parents("form"),$messages=$(".homey_register_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?($messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),$(".homey_login_messages").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),$("#modal-register").modal("hide"),$("#modal-login").modal("show")):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==homey_reCaptcha&&homeyReCaptchaReset(),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#homey_forgetpass").on("click",function(e){e.preventDefault();var user_login=$("#user_login_forgot").val(),security=$("#homey_resetpassword_security").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password",user_login:user_login,security:security},beforeSend:function(){$("#homey_msg_reset").empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$("#homey_msg_reset").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"):$("#homey_msg_reset").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),0<$("#homey_reset_password").length&&$("#homey_reset_password").on("click",function(e){e.preventDefault();var t=$(this),a=$('input[name="rp_login"]').val(),r=$('input[name="rp_key"]').val(),s=$('input[name="new_password"]').val(),o=$('input[name="homey_resetpassword_security"]').val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password_2",rq_login:a,password:s,rp_key:r,security:o},beforeSend:function(){t.children("i").remove(),t.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?(jQuery("#password_reset_msgs, .homey_login_messages").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),jQuery("#new_password").val(""),$("#modal-login").modal("show")):jQuery("#password_reset_msgs").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(e){},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}),$(".homey-facebook-login").on("click",function(){var e=$(this);homey_login_via_facebook(e)});var homey_login_via_facebook=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_facebook_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-yahoo-login").on("click",function(){var e=$(this);homey_login_via_yahoo(e)});var homey_login_via_yahoo=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_yahoo_login"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-google-login").on("click",function(){var e=$(this);homey_login_via_google(e)});var homey_login_via_google=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_google_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_message_notifications=function(){$.ajax({url:ajaxurl,data:{action:"homey_chcek_messages_notifications"},method:"POST",dataType:"JSON",beforeSend:function(){},success:function(e){e.success&&(e.notification?($(".user-alert").show(),$(".msg-alert").show()):($(".user-alert").hide(),$(".msg-alert").hide()))}})};$(document).ready(function(){homey_message_notifications(),0!=parseInt(userID,10)&&setInterval(function(){homey_message_notifications()},6e4)}),$(".btn_extra_expense").on("click",function(e){e.preventDefault();$("#resrv_id").val()})}});